{% extends 'global/base.html' %}

{% block content %}

<style>
    .form-pa {
        margin-top: 310px;
        display: flex;
        justify-content: center;
        align-items: center;
    }
</style>

<div class="form-pa">
    <form method="get" action="{% url 'inventario:relatorios' %}" class="form-1col">
        <div class="form-title">Relatórios de Inventário</div>

        <div class="form-group-1col">
            <label for="pa">Selecione a PA:</label>
            <select name="pa" id="pa">
                {% for grupo in grupos %}
                <option value="{{ grupo.name }}" {% if grupo.name == pa_selecionada %}selected{% endif %}>
                    {{ grupo.name|slice:"7:" }}
                </option>
                {% endfor %}
            </select>
        </div>

        <div class="button-group">
            <button class="bipagem-button" type="submit">Visualizar</button>
            <button class="bipagem-button" type="submit" name="formato" value="pdf">Extrair PDF</button>
            <button class="bipagem-button" type="submit" name="formato" value="csv">Extrair CSV</button>
        </div>
    </form>
</div>

{% if dados_pa %}
<div class="scroll-tabela-lotes">
    <table class="tabela-lotes">
        <thead>
            <tr>
                <th>Lote</th>
                <th>Status</th>
                <th>Criado por</th>
                <th>Total de Caixas</th>
                <th>Total de Seriais</th>
            </tr>
        </thead>
        <tbody>
            {% for item in dados_pa %}
            <tr>
                <td>{{ item.lote }}</td>
                <td>{{ item.status }}</td>
                <td>{{ item.criado_por }}</td>
                <td>{{ item.total_caixas }}</td>
                <td>{{ item.total_seriais }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}
{% endblock %}